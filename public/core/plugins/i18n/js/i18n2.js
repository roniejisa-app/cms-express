const u=(()=>{const e=document.querySelector(".cms-loading");if(e)return{show(...t){if(t.length>0)for(const n of t)n.style.pointerEvents="none";e.classList.add("show")},hide(...t){if(t.length>0)for(const n of t)n.style.pointerEvents=null;e.classList.remove("show")}}})(),r={endpoint:"",headers:{},body:{},params:{},options:{},setHeaders:(e,t)=>{r.headers[e]=t},setBody:(e,t)=>{r.body[e]=t},buildData:(e,t)=>{if(t==="json")return JSON.stringify(e);if(t==="formData"){const n=new FormData;for(const[s,o]of Object.entries(e))o instanceof FileList?Array.from(o).forEach(a=>{n.append(s,a)}):n.append(s,o);return n}else{let n=[];for(const[s,o]of Object.entries(e))n.push(`${s}=${o}`);return n=n.join("&"),n}},setParam:(e,t)=>{r.params[e]=t},send:async(e,t,n=null,s="json")=>{let o="";const a={headers:r.headers};s==="json"?a.headers["Content-Type"]="application/json":s==="form"?a.headers["Content-Type"]="application/x-www-form-urlencoded":s==="formData"&&delete a.headers["Content-Type"],n&&(e==="GET"||s==="form"||s==="formData"?a.body=r.buildData(n,s):a.body=JSON.stringify(n)),Object.entries(r.params).length&&(o+="?"+r.buildData(r.params)),a.method=e;try{const i=await fetch(`${r.getEndpoint()}${t}${o}`,a),c=await i.json();return{error:!1,response:i,data:c}}catch(i){return{error:{status:100,message:i.message}}}},getEndpoint:()=>r.endpoint,setEndpoint:e=>{r.endpoint=e},get:async(e,t=null,n="json")=>r.send("GET",e,t,n),post:async(e,t,n="json")=>r.send("POST",e,t,n),patch:async(e,t,n="json")=>r.send("PATCH",e,t,n)};window.addEventListener("DOMContentLoaded",function(){document!=null&&document.querySelector('meta[name="csrf-token"]')&&r.setHeaders("X-CSRF-TOKEN",document.querySelector('meta[name="csrf-token"]').getAttribute("content"))});(()=>{r.setEndpoint("https://localhost:9999/nimda");const e=document.querySelector(".i18n-form select"),t=document.querySelector(".table-data tbody");e.onchange=async()=>{console.log(e.value),u.show();const{data:{data:o},response:a}=await r.post("/words",{lang:e.value});n(o),u.hide(),s()};function n(o){t.innerHTML="";for(const[a,i]of Object.entries(o))t.innerHTML+=`
                <tr>
                    <td>${a}</td>
                    <td data-key="${a}">${i}</td>
                </tr>
            `}function s(){for(const o of t.querySelectorAll("td:nth-child(2)"))o.ondblclick=a=>{if(o.querySelector("input"))return;console.log("hehe");const i=o.dataset.key,c=o.innerText;o.innerHTML=`
                    <form class="form-edit-word">
                        <input type="text" value="${c}"/>
                        <button>LÆ°u</button>  
                        <button type="reset">Reset</button>
                    </form>
                `;const d=o.querySelector(".form-edit-word");d.onsubmit=async f=>{f.preventDefault();const l=d.querySelector("input").value;if(l.trim()===c)return o.innerText=c;const{data:p,response:m}=await r.patch("/words",{lang:e.value,key:i,value:l});m.ok&&(o.innerText=l)}}}s()})();
